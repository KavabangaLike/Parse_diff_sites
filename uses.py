urls_for_parser = [
    ('Ubud', 'Rent house ubud',
     'https://www.facebook.com/marketplace/112356482109204/search/?query=Rent%20house%20ubud',
     ),
    ('Ubud', 'villa ubud',
     'https://www.facebook.com/marketplace/112356482109204/search/?query=villa%20ubud&exact=false',
     ),
    ('Ubud', 'Rent house',
     'https://www.facebook.com/marketplace/112356482109204/search?query=Rent%20house',
     ),
    ('Ubud', 'ubud apartment',
     'https://www.facebook.com/marketplace/112356482109204/search?query=ubud%20apartment',
     ),
    ('Ubud', '2 bedroom',
     'https://www.facebook.com/marketplace/112356482109204/search?query=2%20bedroom',
     ),
    ('Ubud', '3 bedroom',
     'https://www.facebook.com/marketplace/112356482109204/search?query=3%20bedroom',
     )
]

users = [
    ('57360326', 'admin'),  # Yuriy
    ('713316561', 'user')   # 'Letoy'
]
'''
wd=1036x739; datr=z4nCZKF-sdrRMplv6IhIbFHr; fr=0thr3YXqzv3PxcZXP.AWULydkSHMbC5twWwRKNiy8i0SQ.BkzdvC.6b.AAA.0.0.BkzfeG.AWX4Pjf9Q5g; dpr=1.25; sb=7F3FZO0sgIfcfmts9EvPeyvt; c_user=100009838242991; xs=3%3ApSkk2mXdF2k8FA%3A2%3A1691218746%3A-1%3A14680; presence=C%7B%22t3%22%3A%5B%5D%2C%22utc3%22%3A1691219854818%2C%22v%22%3A1%7D
wd=1536x739; datr=z4nCZKF-sdrRMplv6IhIbFHr; fr=0thr3YXqzv3PxcZXP.AWXEyrBeZlxerXYnxe_lJ-RJGRw.BkzdvC.6b.AAA.0.0.BkzeFa.AWXKLFHTa6o; dpr=1.25; sb=7F3FZO0sgIfcfmts9EvPeyvt; c_user=100009838242991; xs=9%3A-NVePP_uer2lAw%3A2%3A1691214168%3A-1%3A14680; presence=C%7B%22t3%22%3A%5B%5D%2C%22utc3%22%3A1691214691199%2C%22v%22%3A1%7 D # mitrie
wd=1536x739; datr=z4nCZKF-sdrRMplv6IhIbFHr; fr=0thr3YXqzv3PxcZXP.AWXEyrBeZlxerXYnxe_lJ-RJGRw.BkzdvC.6b.AAA.0.0.BkzeFa.AWXKLFHTa6o; dpr=1.25; sb=7F3FZO0sgIfcfmts9EvPeyvt; c_user=100009838242991; xs=9%3A-NVePP_uer2lAw%3A2%3A1691214168%3A-1%3A14680; presence=C%7B%22t3%22%3A%5B%5D%2C%22utc3%22%3A169121'4691199'%2C%22v%22%3A1%7 D  # mitrie
wd=1036x739; datr=z4nCZKF-sdrRMplv6IhIbFHr; fr=0thr3YXqzv3PxcZXP.AWXEyrBeZlxerXYnxe_lJ-RJGRw.BkzdvC.6b.AAA.0.0.BkzeFa.AWXKLFHTa6o; dpr=1.25; sb=7F3FZO0sgIfcfmts9EvPeyvt; c_user=100009838242991; xs=9%3A-NVePP_uer2lAw%3A2%3A1691214168%3A-1%3A14680; presence=C%7B%22t3%22%3A%5B%5D%2C%22utc3%22%3A1691214218723%2C%22v%22%3A1%7D # mitrie
wd=1036x739; datr=z4nCZKF-sdrRMplv6IhIbFHr; fr=0thr3YXqzv3PxcZXP.AWXC9zn5nVJ5V5J9p8A7yOibt3A.BkzdvC.6b.AAA.0.0.Bkze9G.AWVc6mqIQnM; dpr=1.25; sb=7F3FZO0sgIfcfmts9EvPeyvt; c_user=100095339734259; xs=28%3A7JbO9bjuAN1VPg%3A2%3A1691217733%3A-1%3A-1;   presence=C%7B%22t3%22%3A%5B%5D%2C%22utc3%22%3A1691217759222%2C%22v%22%3A1%7D #246
wd=1036x739; datr=z4nCZKF-sdrRMplv6IhIbFHr; fr=0thr3YXqzv3PxcZXP.AWXC9zn5nVJ5V5J9p8A7yOibt3A.BkzdvC.6b.AAA.0.0.Bkze9G.AWVc6mqIQnM; dpr=1.25; sb=7F3FZO0sgIfcfmts9EvPeyvt; c_user=100095339734259; xs=28%3A7JbO9bjuAN1VPg%3A2%3A1691217733%3A-1%3A-1;   presence=C%7B%22t3%22%3A%5B%5D%2C%22utc3%22%3A1691217759222%2C%22v%22%3A1%7D
wd=1036x739; datr=z4nCZKF-sdrRMplv6IhIbFHr; fr=0thr3YXqzv3PxcZXP.AWWvXS1ae6zr2TFVb3FqU-z4VQk.BkzdvC.6b.AAA.0.0.BkzfM6.AWWr23l6NnE; dpr=1.25; sb=7F3FZO0sgIfcfmts9EvPeyvt; c_user=100009838242991; xs=3%3ApSkk2mXdF2k8FA%3A2%3A1691218746%3A-1%3A14680; presence=C%7B%22t3%22%3A%5B%5D%2C%22utc3%22%3A1691218753856%2C%22v%22%3A1%7D
wd=1036x739; datr=z4nCZKF-sdrRMplv6IhIbFHr; fr=0thr3YXqzv3PxcZXP.AWWvXS1ae6zr2TFVb3FqU-z4VQk.BkzdvC.6b.AAA.0.0.BkzfM6.AWWr23l6NnE; dpr=1.25; sb=7F3FZO0sgIfcfmts9EvPeyvt; c_user=100009838242991; xs=3%3ApSkk2mXdF2k8FA%3A2%3A1691218746%3A-1%3A14680; presence=C%7B%22t3%22%3A%5B%5D%2C%22utc3%22%3A1691218853782%2C%22v%22%3A1%7D
wd=1036x739; datr=z4nCZKF-sdrRMplv6IhIbFHr; fr=0thr3YXqzv3PxcZXP.AWULydkSHMbC5twWwRKNiy8i0SQ.BkzdvC.6b.AAA.0.0.BkzfeG.AWX4Pjf9Q5g; dpr=1.25; sb=7F3FZO0sgIfcfmts9EvPeyvt; c_user=100009838242991; xs=3%3ApSkk2mXdF2k8FA%3A2%3A1691218746%3A-1%3A14680; presence=C%7B%22t3%22%3A%5B%5D%2C%22utc3%22%3A1691219854818%2C%22v%22%3A1%7D
'''


import os,sys,time,random,requests
from bs4 import BeautifulSoup as bs
from datetime import datetime

url='https://n.facebook.com'
xurl=url+'/login.php'
def banner():
	os.system('clear')
	_="-"*44
	ban=f"""
{_}
         _____          __    _       
        / ___/__  ___  / /__ (_)__ ___
       / /__/ _ \/ _ \/  '_// / -_|_-<
       \___/\___/\___/_/\_\/_/\__/___/
[   Author : Md Josif Khan                 ]
[   Github : github.com/wh1teking          ]
[ Time now : {datetime.now()}    ]
{_}
"""
	#print(ban)
ua="Mozilla/5.0 (Linux; Android 4.1.2; GT-I8552 Build/JZO54K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.125 Mobile Safari/537.36"
def login():
	ua = "Mozilla/5.0 (Linux; Android 4.1.2; GT-I8552 Build/JZO54K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.125 Mobile Safari/537.36"

	url = 'https://n.facebook.com'
	xurl = url + '/login.php'
	try:
		user='wotdimas@gmail.com'
		pswd='kdsxe8t5'
		req=requests.Session()
		req.headers.update({
		'accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9',
		'accept-language': 'en_US','cache-control': 'max-age=0',
		'sec-ch-ua': '"Not?A_Brand";v="8", "Chromium";v="108", "Google Chrome";v="108"',
		'sec-ch-ua-mobile': '?0','sec-ch-ua-platform': "Windows",
		'sec-fetch-dest': 'document','sec-fetch-mode': 'navigate',
		'sec-fetch-site': 'same-origin','sec-fetch-user': '?1','upgrade-insecure-requests': '1',
		'user-agent': ua
		})
		with req.get(url) as response_body:
			inspect=bs(response_body.text,'html.parser')
			lsd_key=inspect.find('input',{'name':'lsd'})['value']
			jazoest_key=inspect.find('input',{'name':'jazoest'})['value']
			m_ts_key=inspect.find('input',{'name':'m_ts'})['value']
			li_key=inspect.find('input',{'name':'li'})['value']
			try_number_key=inspect.find('input',{'name':'try_number'})['value']
			unrecognized_tries_key=inspect.find('input',{'name':'unrecognized_tries'})['value']
			bi_xrwh_key=inspect.find('input',{'name':'bi_xrwh'})['value']
			data={
			'lsd':lsd_key,'jazoest':jazoest_key,
			'm_ts':m_ts_key,'li':li_key,
			'try_number':try_number_key,
			'unrecognized_tries':unrecognized_tries_key,
			'bi_xrwh':bi_xrwh_key,'email':user,
			'pass':pswd,'login':"submit"}
			response_body2=req.post(xurl,data=data,allow_redirects=True,timeout=300)
			cookie=str(req.cookies.get_dict())[1:-1].replace("'","").replace(",",";").replace(":","=")
			if 'checkpoint' in cookie:sys.exit("\033[1;31mAccount terminated by Facebook!\033[0m")
			elif 'c_user' in cookie:
				#print(f'\n   [\033[38;5;83mCOOKIES\033[0m] \033[38;5;208m{cookie}\033[0m\n\n')
				with open('cookies.txt', 'a') as file:
					file.write(f'{cookie}\n')
				# open('cookie.log','w').write(cookie)
				#os.system('xdg-open https://facebook.com/josifvai')
				#os.system('xdg-open https://github.com/josifkhan')
			else:
				raise ImportError
				# sys.exit("\033[38;5;208mIncorrect details\033[0m")
			return cookie
	except requests.exceptions.ConnectionError:sys.exit('No internet')
	except KeyboardInterrupt:sys.exit("[+] Stopped!")
